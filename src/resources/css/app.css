@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@custom-variant dark (&:where(.dark, .dark *));

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.vue';
@source '../**/*.ts';

/* ==========================================================================
   Design Tokens via @theme - creates utility classes
   ========================================================================== */
@theme {
    /* Typography */
    --font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
    --font-display: 'Playfair Display', ui-serif, Georgia, serif;

    /* Semantic colors as Tailwind tokens (enables bg-page, text-base-primary, etc.) */
    --color-page: var(--color-bg-page);
    --color-surface: var(--color-bg-surface);
    --color-muted: var(--color-bg-muted);
    --color-elevated: var(--color-bg-elevated);
    --color-base-primary: var(--color-text-primary);
    --color-base-secondary: var(--color-text-secondary);
    --color-base-muted: var(--color-text-muted);
    --color-base-inverted: var(--color-text-inverted);

    /* Primary palette shades (generated from admin settings) */
    --color-primary-50: var(--color-primary-50);
    --color-primary-100: var(--color-primary-100);
    --color-primary-200: var(--color-primary-200);
    --color-primary-300: var(--color-primary-300);
    --color-primary-400: var(--color-primary-400);
    --color-primary-500: var(--color-primary-500);
    --color-primary-600: var(--color-primary-600);
    --color-primary-700: var(--color-primary-700);
    --color-primary-800: var(--color-primary-800);
    --color-primary-900: var(--color-primary-900);
    --color-primary-950: var(--color-primary-950);

    /* Accent palette shades */
    --color-accent-50: var(--color-accent-50);
    --color-accent-100: var(--color-accent-100);
    --color-accent-200: var(--color-accent-200);
    --color-accent-300: var(--color-accent-300);
    --color-accent-400: var(--color-accent-400);
    --color-accent-500: var(--color-accent-500);
    --color-accent-600: var(--color-accent-600);
    --color-accent-700: var(--color-accent-700);
    --color-accent-800: var(--color-accent-800);
    --color-accent-900: var(--color-accent-900);
    --color-accent-950: var(--color-accent-950);

    /* Neutral palette shades */
    --color-neutral-50: var(--color-neutral-50);
    --color-neutral-100: var(--color-neutral-100);
    --color-neutral-200: var(--color-neutral-200);
    --color-neutral-300: var(--color-neutral-300);
    --color-neutral-400: var(--color-neutral-400);
    --color-neutral-500: var(--color-neutral-500);
    --color-neutral-600: var(--color-neutral-600);
    --color-neutral-700: var(--color-neutral-700);
    --color-neutral-800: var(--color-neutral-800);
    --color-neutral-900: var(--color-neutral-900);
    --color-neutral-950: var(--color-neutral-950);

    /* Semantic status colors */
    --color-success: var(--color-success);
    --color-success-bg: var(--color-success-bg);
    --color-error: var(--color-error);
    --color-error-bg: var(--color-error-bg);
    --color-warning: var(--color-warning);
    --color-warning-bg: var(--color-warning-bg);
    --color-info: var(--color-info);
    --color-info-bg: var(--color-info-bg);

    /* Transitions */
    --transition-card: 200ms ease-in-out;
    --transition-colors: 150ms ease-in-out;
}

/* ==========================================================================
   Semantic Tokens - Light Mode (Default)
   Following best practices: warm stone palette, no pure black/white
   ========================================================================== */
:root {
    /* Primary Colors */
    --color-primary: #D97706;           /* amber-600 - richer amber for light mode */
    --color-primary-hover: #B45309;     /* amber-700 */
    --color-primary-light: #FEF3C7;     /* amber-100 - subtle backgrounds */
    --color-primary-dark: #92400E;      /* amber-800 */

    /* Secondary Colors */
    --color-secondary: #57534E;         /* stone-600 */
    --color-secondary-hover: #44403C;   /* stone-700 */
    --color-secondary-light: #A8A29E;   /* stone-400 */

    /* Background Colors */
    --color-bg-page: #FAFAF9;           /* stone-50 - warm white */
    --color-bg-surface: #FFFFFF;        /* white for cards */
    --color-bg-elevated: #FFFFFF;       /* modals, dropdowns */
    --color-bg-muted: #F5F5F4;          /* stone-100 - subtle sections */

    /* Text Colors */
    --color-text-primary: #1C1917;      /* stone-900 */
    --color-text-secondary: #57534E;    /* stone-600 */
    --color-text-muted: #A8A29E;        /* stone-400 */
    --color-text-inverted: #FFFFFF;     /* white on dark bg */

    /* Border Colors */
    --color-border: #E7E5E4;            /* stone-200 */
    --color-border-strong: #D6D3D1;     /* stone-300 */

    /* Status Colors - Light Mode */
    --color-success: #16A34A;           /* green-600 */
    --color-success-bg: #DCFCE7;        /* green-100 */
    --color-warning: #CA8A04;           /* yellow-600 */
    --color-warning-bg: #FEF9C3;        /* yellow-100 */
    --color-error: #DC2626;             /* red-600 */
    --color-error-bg: #FEE2E2;          /* red-100 */
    --color-info: #2563EB;              /* blue-600 */
    --color-info-bg: #DBEAFE;           /* blue-100 */

    /* Focus Ring */
    --color-focus-ring: #F59E0B;        /* amber-500 */
    --color-focus-ring-offset: #FFFFFF;
}

/* ==========================================================================
   Semantic Tokens - Dark Mode
   WCAG Accessibility Compliance:
   - Text primary (#F5F5F4): 15:1 contrast ratio - AAA ✓
   - Text secondary (#D6D3D1): 11:1 contrast ratio - AAA ✓
   - Text muted (#A8A29E): 5.2:1 contrast ratio - AA ✓
   Best practices:
   - NO pure black (#000000) - using stone-900 (#1C1917) instead
   - NO pure white text - using stone-100 (#F5F5F4)
   - Reduced saturation on accent colors
   ========================================================================== */
.dark {
    /* Primary Colors - Glowing amber for dark backgrounds */
    --color-primary: #F59E0B;           /* amber-500 - brighter, glowing */
    --color-primary-hover: #FBBF24;     /* amber-400 - lighter on hover */
    --color-primary-light: #451A03;     /* amber-950 - muted background */
    --color-primary-dark: #D97706;      /* amber-600 */

    /* Secondary Colors */
    --color-secondary: #A8A29E;         /* stone-400 - lighter in dark mode */
    --color-secondary-hover: #D6D3D1;   /* stone-300 */
    --color-secondary-light: #57534E;   /* stone-600 */

    /* Background Colors - Lighter dark mode (L=0.18/0.25/0.32) for reduced eye strain */
    --color-bg-page: #252220;           /* neutral-950 - main background (was #1C1917) */
    --color-bg-surface: #302D2A;        /* neutral-900 - cards (was #292524) */
    --color-bg-elevated: #3D3936;       /* neutral-800 - modals, dropdowns (was #44403C) */
    --color-bg-muted: #302D2A;          /* neutral-900 - subtle sections (same as surface) */

    /* Text Colors - WCAG AA compliant */
    --color-text-primary: #F5F5F4;      /* stone-100 - 15:1 AAA */
    --color-text-secondary: #D6D3D1;    /* stone-300 - 11:1 AAA */
    --color-text-muted: #A8A29E;        /* stone-400 - 5.2:1 AA (was stone-500, failed) */
    --color-text-inverted: #1C1917;     /* stone-900 */

    /* Border Colors */
    --color-border: #44403C;            /* stone-700 */
    --color-border-strong: #57534E;     /* stone-600 */

    /* Status Colors - Dark Mode (slightly reduced saturation) */
    --color-success: #4ADE80;           /* green-400 */
    --color-success-bg: #14532D;        /* green-900 */
    --color-warning: #FACC15;           /* yellow-400 */
    --color-warning-bg: #713F12;        /* yellow-900 */
    --color-error: #F87171;             /* red-400 */
    --color-error-bg: #7F1D1D;          /* red-900 */
    --color-info: #60A5FA;              /* blue-400 */
    --color-info-bg: #1E3A8A;           /* blue-900 */

    /* Focus Ring */
    --color-focus-ring: #FBBF24;        /* amber-400 */
    --color-focus-ring-offset: #1C1917; /* stone-900 */
}

/* ==========================================================================
   Semantic Utility Classes
   Components use these instead of hardcoded colors like bg-white dark:bg-gray-800
   ========================================================================== */

/* Background utilities */
.bg-page { background-color: var(--color-bg-page); }
.bg-surface { background-color: var(--color-bg-surface); }
.bg-elevated { background-color: var(--color-bg-elevated); }
.bg-muted { background-color: var(--color-bg-muted); }
.bg-primary { background-color: var(--color-primary); }
.bg-primary-light { background-color: var(--color-primary-light); }

/* Text utilities */
.text-base-primary { color: var(--color-text-primary); }
.text-base-secondary { color: var(--color-text-secondary); }
.text-base-muted { color: var(--color-text-muted); }
.text-base-inverted { color: var(--color-text-inverted); }
.text-primary { color: var(--color-primary); }

/* Border utilities */
.border-default { border-color: var(--color-border); }
.border-strong { border-color: var(--color-border-strong); }
.border-primary { border-color: var(--color-primary); }

/* Status text utilities */
.text-success { color: var(--color-success); }
.text-error { color: var(--color-error); }
.text-warning { color: var(--color-warning); }
.text-info { color: var(--color-info); }

/* Status background utilities (light) */
.bg-success-light { background-color: var(--color-success-bg); }
.bg-error-light { background-color: var(--color-error-bg); }
.bg-warning-light { background-color: var(--color-warning-bg); }
.bg-info-light { background-color: var(--color-info-bg); }

/* Status border utilities */
.border-success { border-color: var(--color-success); }
.border-error { border-color: var(--color-error); }
.border-warning { border-color: var(--color-warning); }
.border-info { border-color: var(--color-info); }

/* ==========================================================================
   Badge & Tag Design System
   Context-aware badge styling for professional appearance
   ========================================================================== */

/*
 * Badge Style Variants:
 *
 * 1. SUBTLE (default) - For page backgrounds and filters
 *    - Light mode: 20% opacity background, darkened text
 *    - Dark mode: 40% opacity background, lightened text
 *    - Use case: Tag filters, inline tags on neutral backgrounds
 *    - Pros: Lightweight, unobtrusive, modern
 *    - Cons: Low contrast on colored backgrounds
 *
 * 2. OVERLAY - For badges on images and colored cards
 *    - Light mode: White (92% opacity) background, dark text, blur effect
 *    - Dark mode: Stone-900 (85% opacity) background, light text, blur effect
 *    - Use case: Category badges on card images, overlays on photos
 *    - Pros: Readable on ANY background, no color mixing
 *    - Cons: More prominent, heavier visual weight
 *
 * 3. SOLID - For brand-colored badges
 *    - Uses tag's hex color as background
 *    - Text color determined by luminance (dark/light contrast)
 *    - Use case: Status badges, primary category indicators
 *    - Pros: Strong visual identity, clear categorization
 *    - Cons: More saturated, can overwhelm if overused
 *
 * Implementation: See TagBadge.vue component
 * Color utilities: /resources/js/utils/color.ts
 */

/* ==========================================================================
   Component-level Dark Mode Overrides
   For components that need specific dark mode styling
   ========================================================================== */

/* Input fields dark mode */
.dark input:not([type="checkbox"]):not([type="radio"]),
.dark textarea,
.dark select {
    background-color: var(--color-bg-surface);
    border-color: var(--color-border);
    color: var(--color-text-primary);
}

.dark input:not([type="checkbox"]):not([type="radio"]):focus,
.dark textarea:focus,
.dark select:focus {
    border-color: var(--color-primary);
    --tw-ring-color: var(--color-primary);
}

.dark input:not([type="checkbox"]):not([type="radio"]):disabled,
.dark textarea:disabled,
.dark select:disabled {
    background-color: var(--color-bg-muted);
    color: var(--color-text-muted);
}

/* Date/time input icons for dark mode */
.dark input[type="date"]::-webkit-calendar-picker-indicator,
.dark input[type="datetime-local"]::-webkit-calendar-picker-indicator,
.dark input[type="time"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    opacity: 0.7;
    cursor: pointer;
}

.dark input[type="date"]::-webkit-calendar-picker-indicator:hover,
.dark input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover,
.dark input[type="time"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
}

/* Focus ring offset color for dark mode */
.dark .focus\:ring-offset-2 {
    --tw-ring-offset-color: var(--color-bg-page);
}

/* ==========================================================================
   FullCalendar Component Styling
   Third-party library - requires global CSS (scoped styles don't work)
   ========================================================================== */

/* ===== LIGHT MODE ===== */
.event-calendar .fc {
    --fc-border-color: var(--color-border);
    --fc-button-bg-color: var(--color-primary-500);
    --fc-button-border-color: var(--color-primary-500);
    --fc-button-hover-bg-color: var(--color-primary-600);
    --fc-button-hover-border-color: var(--color-primary-600);
    --fc-button-active-bg-color: var(--color-primary-700);
    --fc-button-active-border-color: var(--color-primary-700);
    --fc-event-bg-color: var(--color-primary-500);
    --fc-event-border-color: var(--color-primary-500);
    --fc-today-bg-color: var(--color-primary-100);
    --fc-page-bg-color: var(--color-bg-surface);
    --fc-neutral-bg-color: var(--color-bg-page);
}

.event-calendar .fc-theme-standard th {
    background-color: var(--color-primary-100);
    border-color: var(--fc-border-color);
}

.event-calendar .fc-theme-standard td {
    border-color: var(--fc-border-color);
    background-color: var(--fc-page-bg-color);
}

.event-calendar .fc-toolbar-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
}

.event-calendar .fc-button {
    text-transform: capitalize;
    font-weight: 500;
}

.event-calendar .fc-event {
    cursor: pointer;
    transition: transform 0.15s ease-in-out;
}

.event-calendar .fc-event:hover {
    transform: scale(1.05);
}

.event-calendar .fc-daygrid-event {
    white-space: normal;
    align-items: flex-start;
}

.event-calendar .fc-event-title {
    font-weight: 500;
}

.event-calendar .fc-daygrid-day-number {
    color: var(--color-text-primary);
}

.event-calendar .fc-day-other .fc-daygrid-day-number {
    color: var(--color-text-muted);
}

/* ===== DARK MODE ===== */
.dark .event-calendar .fc {
    --fc-border-color: var(--color-border);
    --fc-today-bg-color: var(--color-primary-950);
    --fc-page-bg-color: var(--color-bg-surface);
    --fc-neutral-bg-color: var(--color-bg-page);
    --fc-button-text-color: var(--color-text-primary);
}

.dark .event-calendar .fc-view-harness,
.dark .event-calendar .fc-scrollgrid,
.dark .event-calendar .fc-scrollgrid-section-body table {
    background-color: var(--color-bg-surface);
}

.dark .event-calendar .fc-theme-standard th,
.dark .event-calendar .fc-col-header,
.dark .event-calendar .fc-col-header-cell {
    background-color: var(--color-neutral-700);
    border-color: var(--color-border);
}

.dark .event-calendar .fc-theme-standard td,
.dark .event-calendar .fc-daygrid-day,
.dark .event-calendar .fc-daygrid-day-frame {
    background-color: var(--color-bg-surface);
    border-color: var(--color-border);
}

.dark .event-calendar .fc-day-today,
.dark .event-calendar .fc-day-today .fc-daygrid-day-frame {
    background-color: var(--color-primary-950);
}

.dark .event-calendar .fc-day-other,
.dark .event-calendar .fc-day-other .fc-daygrid-day-frame {
    background-color: var(--color-bg-page);
}

.dark .event-calendar .fc-toolbar-title {
    color: var(--color-text-primary);
}

.dark .event-calendar .fc-daygrid-day-number {
    color: var(--color-text-primary);
}

.dark .event-calendar .fc-day-other .fc-daygrid-day-number {
    color: var(--color-text-muted);
}

.dark .event-calendar .fc-col-header-cell-cushion {
    color: var(--color-text-secondary);
}

.dark .event-calendar .fc-event-title,
.dark .event-calendar .fc-event-time {
    color: var(--color-text-inverted);
}

.dark .event-calendar .fc-daygrid-more-link {
    color: var(--color-primary-action);
}

/* ===== COMPACT MODE ===== */
.event-calendar--compact .fc-theme-standard th,
.event-calendar--compact .fc-theme-standard td,
.event-calendar--compact .fc-theme-standard .fc-scrollgrid,
.event-calendar--compact .fc-scrollgrid-sync-table {
    border: none;
}

.event-calendar--compact .fc-toolbar-title {
    font-size: 1rem;
    font-weight: 600;
}

.event-calendar--compact .fc-button {
    background: none;
    border: none;
    color: var(--color-text-muted);
    padding: 0.25rem 0.5rem;
    box-shadow: none;
}

.event-calendar--compact .fc-button:hover {
    color: var(--color-primary-action);
    background: none;
}

.event-calendar--compact .fc-button:focus {
    box-shadow: none;
}

.dark .event-calendar--compact .fc-button {
    color: var(--color-text-muted);
}

.dark .event-calendar--compact .fc-button:hover {
    color: var(--color-primary-action-hover);
}

.event-calendar--compact .fc-col-header-cell {
    background: transparent;
    padding: 0.5rem 0;
}

.event-calendar--compact .fc-col-header-cell-cushion {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--color-text-muted);
    text-transform: uppercase;
}

.dark .event-calendar--compact .fc-col-header-cell-cushion {
    color: var(--color-text-muted);
}

.event-calendar--compact .fc-daygrid-day {
    cursor: pointer;
}

.event-calendar--compact .fc-daygrid-day-frame {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: auto;
    padding: 4px 0;
}

.event-calendar--compact .fc-daygrid-day-top {
    flex-direction: row;
    justify-content: center;
}

.event-calendar--compact .fc-daygrid-day-number {
    font-size: 0.875rem;
    padding: 0;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.15s ease;
    color: var(--color-text-primary);
}

.dark .event-calendar--compact .fc-daygrid-day-number {
    color: var(--color-text-secondary);
}

.event-calendar--compact .fc-daygrid-day:not(.fc-day-today):hover .fc-daygrid-day-number {
    background-color: var(--color-neutral-100);
}

.dark .event-calendar--compact .fc-daygrid-day:not(.fc-day-today):hover .fc-daygrid-day-number {
    background-color: var(--color-neutral-700);
}

.event-calendar--compact .fc-day-today .fc-daygrid-day-number {
    background-color: var(--color-primary-action);
    color: var(--color-text-inverted);
    font-weight: 600;
}

.event-calendar--compact .fc-day-other .fc-daygrid-day-number {
    color: var(--color-text-muted);
}

.dark .event-calendar--compact .fc-day-other .fc-daygrid-day-number {
    color: var(--color-neutral-600);
}

.event-calendar--compact .fc-day-other .fc-daygrid-event-dot {
    opacity: 0.35;
}

.event-calendar--compact .fc-daygrid-day-events,
.event-calendar--compact .fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events {
    display: flex;
    justify-content: center;
    gap: 2px;
    min-height: 0;
    margin-top: 2px;
}

.event-calendar--compact .fc-daygrid-day-bottom {
    display: none;
}

.event-calendar--compact .fc-daygrid-event-harness {
    margin: 0;
}

.event-calendar--compact .fc-daygrid-event {
    margin: 0;
    padding: 0;
    background: none;
    border: none;
}

.event-calendar--compact .fc-daygrid-event-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--color-primary-action);
    border: none;
    margin: 0;
}

.event-calendar--compact .fc-event-title,
.event-calendar--compact .fc-event-time {
    display: none;
}

.event-calendar--compact .fc-daygrid-event-harness-abs {
    position: relative;
}

/* ==========================================================================
   Prose Typography
   Direct color overrides for @tailwindcss/typography using theme CSS variables
   ========================================================================== */

/* Prose body text - using !important to override Tailwind typography defaults */
.prose {
    color: var(--color-text-primary) !important;
}

.prose :where(p, li, td, th, dt, dd, figcaption):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: inherit !important;
}

.prose :where(strong, b):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--color-text-primary);
    font-weight: 600;
}

.prose :where(h1, h2, h3, h4, h5, h6):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--color-text-primary);
}

.prose :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--color-primary);
    text-decoration: underline;
}

.prose :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)):hover {
    color: var(--color-primary-hover);
}

.prose :where(blockquote):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--color-text-secondary);
    border-left-color: var(--color-border);
}

.prose :where(code):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    color: var(--color-text-primary);
}

.prose :where(pre):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    background-color: var(--color-bg-muted);
    color: var(--color-text-secondary);
}

.prose :where(hr):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
    border-color: var(--color-border);
}

.prose :where(ul > li, ol > li):not(:where([class~="not-prose"], [class~="not-prose"] *))::marker {
    color: var(--color-text-muted);
}
